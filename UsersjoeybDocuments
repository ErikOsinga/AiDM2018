import numpy as np

all_sim_pairs =  np.loadtxt('./all_similar_pairs.txt',delimiter=',')
found_pairs = np.loadtxt('./results_test.txt',delimiter=',')

number_wrong = 0
for i in range(found_pairs.shape[0]):
	user1, user2 = int(found_pairs[i][0]), int(found_pairs[i][1])
	
	# find all users2 that this user1 is similar to, and their similarity measure
	sim_users = all_sim_pairs[:,1][ all_sim_pairs[:,0] == user1]
	jaccard = all_sim_pairs[:,2][ all_sim_pairs[:,0] == user1]

	if user2 not in np.asarray(sim_users,dtype=int):
		number_wrong += 1
		print ('Wrong pair found.')
	else:
		real_jaccard = jaccard[ sim_users == user2 ]
		calc_jaccard = found_pairs[i][2]
		print (real_jaccard, calc_jaccard)
		print ('Difference between real and calc jaccard:', real_jaccard - calc_jaccard)

